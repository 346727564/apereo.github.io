---
layout:     post
title:      CAS 5.2.0 RC1 Feature Release
summary:    ...in which I present an overview of CAS 5.2.0 RC1 release.
tags:       [CAS]
---


<div class="alert alert-danger">
  <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>WATCH OUT!</strong><br/>This post is not official yet and may be heavily edited as CAS development makes progress. <a href="https://apereo.github.io/feed.xml">Watch</a> for further updates.
</div>

The official CAS `5.1.0` GA was released on [May 27th 2017](https://github.com/apereo/cas/releases/tag/v5.1.0). Since then,
the project has been moving forward with development of the next feature release
that is tagged as `5.2.0`. This post intends to highlight some of the improvements
and enhancements packed into the first release candidate in the `5.2.0` series.

The in-development documentation of CAS `5.2.0` is [available here](https://apereo.github.io/cas/development/).
The release schedule is also [available here](https://github.com/apereo/cas/milestones). The release policy
is [available here](https://apereo.github.io/cas/developer/Release-Policy.html).

<!-- TOC -->

- [Minors](#minors)
- [Documentation](#documentation)
- [WebJARs for Static Resources](#webjars-for-static-resources)
- [Trusted Authentication Attributes](#trusted-authentication-attributes)
- [Amazon Cloud Directory Authentication](#amazon-cloud-directory-authentication)
- [CAS Protocol v2 Forward Compatibility](#cas-protocol-v2-forward-compatibility)
- [JWTs for REST API](#jwts-for-rest-api)
- [Ehcache Ticket Registry](#ehcache-ticket-registry)
- [HEADER Response Method](#header-response-method)
- [ADFS Delegated Authentication](#adfs-delegated-authentication)
- [ADFS SAML Integration](#adfs-saml-integration)
- [Stormpath Support Removed](#stormpath-support-removed)
- [Ticket Validator SSL Configuration](#ticket-validator-ssl-configuration)
- [Registered Services Endpoint](#registered-services-endpoint)
- [YubiKey MongoDb/JPA Storage](#yubikey-mongodbjpa-storage)
- [Couchbase Authentication](#couchbase-authentication)
- [Apache Cassandra Authentication](#apache-cassandra-authentication)
- [Custom LDAP Password Policy](#custom-ldap-password-policy)
- [FIDO U2F Device Registration](#fido-u2f-device-registration)
- [JWTs As Service Tickets](#jwts-as-service-tickets)
- [Swivel Secure Authentication](#swivel-secure-authentication)
- [Library Upgrades](#library-upgrades)
- [What's Next?](#whats-next)
- [Get Involved](#get-involved)
- [Das Ende](#das-ende)

<!-- /TOC -->

## Minors

- Performance improvements to ensure service selection strategies are properly sorted at runtime.
- A few bug fixes that affect the password management functionality and webflow handling of authentication failure events, thanks to [@pdrados](https://github.com/pdrados).
- Small regression in how URL-based SAML2 metadata resources are retrieved from `http` vs `https` resources.
- Thanks to [@pavelhoral](https://github.com/pavelhoral), ticket registries properly take into account the task of encoding tickets, if needed, before deleting them.
- Thanks to [@jkacer](https://github.com/jkacer), failed authentication attempts are improved to no longer be reported as throttled authentication attempts. Changes are backported as far as back as `5.0.x`.
- Plenty of minor performance improvements to the CAS service registry as well as the overall ticket registry components and that of Hazelcast in particular, thanks to [@DavidRG13](https://github.com/DavidRG13) and [@tsschmidt](https://github.com/tsschmidt).
- Delegated authentication flows now gain support for naming the client, thanks to [@rrenomeron](https://github.com/rrenomeron).
- The Duo WebSDK has been upgraded to its most recent version.

## Documentation

Thanks to [@mindblender](https://github.com/mindblender), the [documentation site](https://apereo.github.io/cas/development/) for the CAS project is now equipped with a much better search user interface.

## WebJARs for Static Resources

Targeting CAS deployments in environments that have no network access can be tricky. In this release candidate, CAS begins to beautifully bundle static UI resources (css, javascript, etc) into the build for offline access. These resources are turned into dependencies that the project stuffs into the build by default using WebJARs. The `org.webjars` project seems to package up most things that CAS needs in jars that are available in maven central and the servlet 3.0 specification makes the resources available to be served up by CAS.

Huge thanks to [@hdeadman](https://github.com/hdeadman) for executing on this.

## Trusted Authentication Attributes

The [Trusted Authentication](https://apereo.github.io/cas/development/installation/Trusted-Authentication.html) features of CAS are now able to extract attributes from the remote request object, in cases where CAS is sitting behind a Shibboleth Service Provider, etc.

## Amazon Cloud Directory Authentication

Thanks to [@vulpayga](https://github.com/vulpayga), CAS gains the ability to use [Amazon Cloud Directory for authentication](https://apereo.github.io/cas/development/installation/AWS-CloudDirectory-Authentication.html).

## CAS Protocol v2 Forward Compatibility

It is now possible to ensure CAS protocol `v2` views are forward compatible with CAS `v3`. The most significant change here is the ability to release attributes via `v2`. The behavior is controlled via a [setting](https://apereo.github.io/cas/development/installation/Configuration-Properties.html#views) that can be turned on/off globally for the CAS deployment.

## JWTs for REST API

The [CAS REST API/Protocol](https://apereo.github.io/cas/development/protocol/REST-Protocol.html) is now equipped with the capability to issue JWTs for service tickets.

## Dynamic Caches for Ticket Registries

The [Ehcache Ticket Registry](https://apereo.github.io/cas/development/installation/Ehcache-Ticket-Registry.html) now gains the option to split caches dynamically based on ticket types, rather than keeping every ticket inside a single statically created cache. The same changeset is also applied to the ticket registry based on MongoDb.

## HEADER Response Method

CAS has for some time had the ability to redirect back to a requesting application providing the generated service ticket in form of a `GET` or `POST` via the `method` parameter. In this release, CAS adds an extra `HEADER` option, stuffing the ticket into a response header. This might be useful if you intend to execute non-interactive modes of authentication such as Basic Authentication.

## ADFS Delegated Authentication

[Delagating authentication to ADFS](https://apereo.github.io/cas/development/integration/ADFS-Integration.html) is now enhanced to support more than once ADFS instance.

## ADFS SAML Integration

A number of minor bugs have been fixed in this release to ensure ADFS acting as a SAML2 SP can be integrated with CAS acting as a SAML2 identity provider.

## Ticket Registry Encryption

The ticket registry implementations based on [Apache Ignite](https://apereo.github.io/cas/development/installation/Ignite-Ticket-Registry.html) and [MongoDb](https://apereo.github.io/cas/development/installation/MongoDb-Ticket-Registry.html) are now enhanced to support ticket registry encryption. 

## Stormpath Support Removed

[Stormpath](https://stormpath.com/) support has been removed from the codebase. This feature will no longer be available, as Stormpath APIs are soon to be retired in mid August after the Okta acquisition.

## Ticket Validator SSL Configuration

There are areas in CAS where a ticket is issued and validated internally to allow access to other downstream components. The configuration of ticket validation component is now exposed to the entire runtime and takes advantage of familiar CAS settings when it comes to SSL factories and hostname verifications.
 
## Registered Services Endpoint

A [new endpoint](https://apereo.github.io/cas/development/installation/Monitoring-Statistics.html) is now exposed in CAS that can report back the collection of registered services with CAS.

## YubiKey MongoDb/JPA Storage

[YubiKey multifactor authentication](https://apereo.github.io/cas/development/installation/YubiKey-Authentication.html) is now able to use MongoDb or a relational database for persisting device registration records. Improvements are in to also support new device registration workflows.

## Couchbase Authentication

CAS gains the ability to use [Couchbase](https://apereo.github.io/cas/development/installation/Couchbase-Authentication.html) as an authentication store. Remember that Couchbase can also be used to [manage CAS services](https://apereo.github.io/cas/development/installation/Couchbase-Service-Management.html) and act as a [ticket store](https://apereo.github.io/cas/development/installation/Couchbase-Ticket-Registry.html) for HA deployments.

## Apache Cassandra Authentication

Thanks to [@vulpayga](https://github.com/vulpayga), CAS gains the ability to use [Apache Cassandra](https://apereo.github.io/cas/development/installation/Cassandra-Authentication.html) as an authentication store.

## Custom LDAP Password Policy

There is now support for implementing your own custom LDAP password policy handler based on Ldaptive. Your implementation [needs to be taught to CAS](https://apereo.github.io/cas/development/installation/Configuration-Properties.html#ldap-authentication) and should take on the following form:

```java
import org.ldaptive.auth.AuthenticationResponseHandler;

public class MyPasswordPolicyAuthenticationResponseHandler implements AuthenticationResponseHandler {
}
```

## FIDO U2F Device Registration

FIDO U2F support for multifactor authentication is now equipped with the ability to store device registration records inside a relational database and more. [See this](https://apereo.github.io/cas/development/installation/FIDO-U2F-Authentication.html#registration) for more info.

## JWTs As Service Tickets

<div class="alert alert-warning">
  <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>Beware</strong><br/>This may be a breaking configuration change. 
  Consult <a href="https://apereo.github.io/cas/development/">the docs</a> to learn more.
</div>

The ability to issue [JWTs as service tickets](https://apereo.github.io/cas/development/installation/Configure-ServiceTicket-JWT.html#configuration) is now refactored and moved into its own dedicated module such that it can then become reusable as a pluggable extension point in other parts of the codebase. If you had this feature turned on, you may need to adjust the module definition in your build slightly to stay on course with the coolness.

## Swivel Secure Authentication

CAS can now take advantage of Swivel Secure's image-based multifactor authentication. See [this guide](https://apereo.github.io/cas/development/installation/SwivelSecure-Authentication.html) to learn more.

Special thanks to [@dacurry-tns](https://github.com/dacurry-tns) for contributing the baseline integration.

## Library Upgrades

- Spring Data
- Spring MongoDb
- Spring Cloud
- Spring Security
- EhCache
- Apache CXF
- Thymeleaf
- Sentry
- Memcached
- Apache Ignite
- Gradle 
- Spring Boot
- Couchbase
- Infinispan
- UnboundID SCIM

## What's Next?

We are all working to make sure the CAS `5.2.0` release is on [schedule](https://github.com/apereo/cas/milestones).

## Get Involved

- Start your CAS deployment today. Try out features and [share feedback](https://apereo.github.io/cas/Mailing-Lists.html).
- Better yet, [contribute patches](https://apereo.github.io/cas/developer/Contributor-Guidelines.html).
- Suggest and apply documentation improvements.

## Das Ende

A big hearty thanks to all who participated in the development of this release to submit patches, report issues and suggest improvements. Keep'em coming!

[Misagh Moayyed](https://twitter.com/misagh84)
